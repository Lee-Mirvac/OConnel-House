<div class="main-sec admin-agent-main">
    <div class="container-fluid">
        <div class="admin-agent-sec">
            <h1 class="h5 text-uppercase">Exisiting Agent</h1>
            <div class="agent-tbl table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>First Name</th>
                            <th>Surname</th>
                            <th>Email</th>

                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody *ngIf="displayTable">
                        <tr *ngFor="
                              let items of agentList;
                              let i = index
                            " [class]="selectedId == i ? 'active' : ''" (click)="checkIndex(i)">
                            <td>{{ items?.name }}</td>
                            <td>{{ items?.firstName }}</td>
                            <td>{{ items?.surName }}</td>
                            <td>{{ items?.email }}</td>


                            <td>
                                <span class="pointer"
                                    (click)="showModal = true; fetchDetails(items?.id, false)">Delete</span>
                            </td>
                            <td>
                                <span class="pointer"
                                    (click)="showModal = true; fetchDetails(items?.id, true)">Edit</span>
                            </td>
                        </tr>

                    </tbody>
                </table>

                <p class="no-record" *ngIf="!displayTable">No Records</p>

                <!-- <pagination-controls [maxSize]="maxSize" (pageChange)="p = $event; changePage($event)"
                    class="pagination" id="first">
                </pagination-controls> -->
            </div>
            <!-- <div class="tbl-btn">
                <button href="#" class="btn btn-outline-primary btn-lg">SUBMIT</button>
            </div> -->
            <div class="agent-form">
                <h2 class="agent-title h5">Add new agent</h2>
                <form [formGroup]="addAgent" (ngSubmit)="onSubmit()">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group row">
                                <label class="col-sm-4"> Business Name</label>
                                <div class="col-sm-8">
                                    <input formControlName="name" appInputRestriction class="form-control"
                                        [ngClass]="{ 'is-invalid': submitted && f.name.errors }" />
                                    <div class="is-invalid" *ngIf="
                                      (submitted || f.name?.touched) && f.name?.errors?.required
                                    ">
                                        Business name is required
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group row">
                                <label class="col-sm-4">Contact First Name</label>
                                <div class="col-sm-8">
                                    <input appInputRestriction formControlName="firstName" class="form-control"
                                        [ngClass]="{
                                      'is-invalid': submitted && f.firstName.errors
                                    }" />
                                    <div class="is-invalid" *ngIf="
                                      (submitted || f.firstName?.touched) &&
                                      f.firstName?.errors?.required
                                    ">
                                        First name is required
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group row">
                                <label class="col-sm-4">Contact Surname</label>
                                <div class="col-sm-8">
                                    <input appInputRestriction formControlName="surName" class="form-control"
                                        [ngClass]="{ 'is-invalid': submitted && f.surName.errors }" />
                                    <div class="is-invalid" *ngIf="
                                      (submitted || f.surName?.touched) &&
                                      f.surName?.errors?.required
                                    ">
                                        Surname is required
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group row">
                                <label class="col-sm-4">Email</label>
                                <div class="col-sm-8">
                                    <input formControlName="email" class="form-control"
                                        [ngClass]="{ 'is-invalid': submitted && f.email.errors }" />
                                    <div class="is-invalid" *ngIf="
                                      (submitted || f.email?.touched) &&
                                      f.email?.errors?.required
                                    ">
                                        Email is required
                                    </div>
                                    <div class="is-invalid" *ngIf="
                                      (submitted || f.email?.touched) &&
                                      f.email?.errors?.pattern
                                    ">
                                        Enter a valid email
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group row">
                                <label class="col-sm-4"></label>
                                <div class="col-sm-8 text-right">
                                    <button class="btn btn-primary btn-lg" [disabled]="!addAgent.valid">
                                        Submit
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

            </div>
        </div>
        <!--admin-agent-sec-->
    </div>
    <!--container-fluid-->
</div>
<div class="logout_btn">
    <i><img src="assets/img/icons/logout-icon.svg" alt="icon" /></i>
</div>

<div class="modal_delete modal_disclaimer" *ngIf="showModal">
    <div class="modal_dialogue">
        <div class="modal-content">
            <button class="close_btn btn-transparent">
                <img src="../../../assets/images/icons/close_icon.svg" alt="close" (click)="showModal = !showModal" />
            </button>
            <h2 *ngIf="!editMode">Confirm deletion of this agent</h2>
            <h2 *ngIf="editMode">Edit details of this agent</h2>
            <button *ngIf="!editMode" (click)="deleteAgent()" class="btn btn-primary btn-lg delete-btn">
                Delete agent
            </button>
            <button *ngIf="editMode" (click)="editAgent()" class="btn btn-primary btn-lg delete-btn">
                Update agent
            </button>
            <form [formGroup]="editForm">
                <div class="form-group">
                    <label>Business Name</label>
                    <input appInputRestriction type="text" placeholder="Please enter name" class="form-control"
                        formControlName="name" minlength="5" maxlength="26" />
                    <div class="is-invalid" *ngIf="
              (submitted || controls.name?.touched) &&
              controls.name?.errors?.required
            ">
                        Business name is required
                    </div>
                </div>
                <div class="form-group">
                    <label>First Name</label>
                    <input appInputRestriction type="text" placeholder="Please enter first name" class="form-control"
                        formControlName="firstName" minlength="5" maxlength="26" />
                    <div class="is-invalid" *ngIf="
              (submitted || controls.firstName?.touched) &&
              controls.firstName?.errors?.required
            ">
                        First name is required
                    </div>
                </div>
                <div class="form-group">
                    <label>Surname</label>
                    <input appInputRestriction type="text" placeholder="Please enter surname" class="form-control"
                        formControlName="surName" minlength="5" maxlength="26" />
                    <div class="is-invalid" *ngIf="
              (submitted || controls.surName?.touched) &&
              controls.surName?.errors?.required
            ">
                        Surname is required
                    </div>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" placeholder="Please enter email" class="form-control" formControlName="email" />
                    <div class="is-invalid" *ngIf="
              (submitted || controls.email?.touched) &&
              controls.email?.errors?.required
            ">
                        Email is required
                    </div>
                    <div class="is-invalid" *ngIf="
              (submitted || controls.email?.touched) &&
              controls.email?.errors?.pattern
            ">
                        Enter a valid email
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>